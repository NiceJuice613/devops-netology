5. По умолчанию выделено
Опер память – 1024 мб
2 процессора
Видеопамять – 4мб
Граф контроллер – VboxVGA
ЖМД – виртуальный размер 64 гб

6. Изменить Vagrantfile  добавив след.строки
   
Vagrant.configure("2") do |config|
	config.vm.box = "bento/ubuntu-20.04"
	config.vm.provider "virtualbox" do |v|
		v.memory = 2048
		v.cpus = 4
end
end

8. Задать переменной HISTFILESIZE, в мануале bash  -  page 1 line 621

A value of ignoreboth is shorthand for ignorespace and ignoredups (Значение относится к переменной HISTCONTROL,  и является сокращением для значений ignorespace и ignoredups (вместе).
Ignorespace - если список значений содержит пробел, строки, начинающиеся с пробела, не сохраняются в списке истории
Ignoredups - строки, соответствующие предыдущей записи истории, не сохраняются

9. Фигурные скобки (brace) – зарезервированные символы. 
Облегчают нам жизнь при работе с большим количеством файлов.
Как пример создать/удалить кучу файлов или папок можно через фигурные скобки.
 Line 793 Brace Expansion

10. Да, можно командой touch {000001..100000}.txt
300 000 не создает, пишет что это слишком много. Но можно обойти командой
Ulimit –s 65536 (ulimit – ограничитель на ресурсы)

11. Проверяет условие у -d /tmp и возвращает ее статус (0 или 1), наличие каталога /tmp
конструкция [[ -d /tmp ]] возвращает 0 или 1 в зависимости от выражения внутри ( В данном случае возвращает Истину, т. к. выражение внутри проверяет существует директория  /tmp ) 

12. 
mkdir /tmp/new_path_dir/
cp /bin/bash/tmp/new_path_dir/
PATH=/tmp/new_path_dir/:$PATH
type -a bash
bash is /tmp/new_path_dir/bash
bash is /usr/bin/bash
bash is /bin/bash

13. at — это утилита командной строки, которая позволяет планировать выполнение команд в определенное время. Задания, созданные с помощью at , выполняются только один раз.
batch или его псевдоним планирует задания и выполняет их в пакетной очереди, если позволяет уровень загрузки системы. По умолчанию задания выполняются, когда средняя загрузка системы ниже 1,5. Значение нагрузки можно указать при вызове демона atd . Если средняя загрузка системы выше указанной, задания будут ждать в очереди.


ДЗ 3.2 Лекция 2


 1.)	Какого типа команда cd? Попробуйте объяснить, почему она именно такого типа; опишите ход своих мыслей, если считаете, что она могла бы быть другого типа.
"type cd"
cd is a shell builtin
Встроенная команда в, от сокращения Change Directory. Используется для смены текущего рабочего каталога. Для выполнения использует переменные среды, а не переменные оболочки.
А переменные среды – это ременные, доступные для всей системы и наследуемые всеми порожденными дочерними процессами и оболочками. 
Теоретически можно сделать CD внешней, но после смены директории необходимо вызвать bash из этого (нового каталога), но тогда мы получим и новый shell, и выходя из сессии придется выходить, опять же, из всех сессий, которые создали при каждом вызове внешней CD.

2.)	Какая альтернатива без pipe команде grep <some_string> <some_file> | wc -l?
vagrant@vagrant:~$ cat tst_bash
if [[ -d /tmp ]];
sdgsdfgfd
sdgsdfgfghdgfd
123
vagrant@vagrant:~$ grep 123 tst_bash -c
1
vagrant@vagrant:~$ "grep 123 tst_bash |wc -l
1”
 
3.)	Какой процесс с PID 1 является родителем для всех процессов в вашей виртуальной машине Ubuntu 20.04?
Запускаем pstree –p, этот процесс – systemd.
Systemd - это "система инициализации". Набор базовых строительных кирпичиков Linux-системы. Представляет собой менеджер системы и служб, который выполняется как процесс с PID 1 и запускает остальную часть системы. На сегодняшний день применяется в Debian, Ubuntu, Fedora, openSUSE и т.д
4.)	Как будет выглядеть команда, которая перенаправит вывод stderr ls на другую сессию терминала?
"ls -l 2>/dev/tty2"
"who"
vagrant  tty2         2020-11-01 12:58 
vagrant  pts/1        2020-11-01 12:59 (10.0.2.2)

Почему-то при любом раскладе выдает Permission Denied. Может из-за подключения по SSH? Но работает при работе самой Ubunte. 





5.)	Получится ли одновременно передать команде файл на stdin и вывести ее stdout в другой файл?

vagrant@vagrant:~$ touch test_bash
vagrant@vagrant:~$ cat test_bash
if [[ -d /tmp ]]; 
blabla
blumblum
10031991
vagrant@vagrant:~$ touch test_bash_out 
vagrant@vagrant:~$ cat <test_bash >tst_bash_out
vagrant@vagrant:~$ cat test_bash_out
if [[ -d /tmp ]]; 
blabla
blumblum
10031991

6.)	Получится ли вывести находясь в графическом режиме данные из PTY в какой-либо из эмуляторов TTY? Сможете ли вы наблюдать выводимые данные??
"tty"
/dev/tty/
"echo Hello from tty1 to tty3 >/dev/tty3"

потом переключиться через Ctrl-Alt-F3 на 3 терминал и увидеть передаваемую запись. Из pts0 не дает мне доступ, опять же может из-за того что там идет работа через SSH?

7.)	Выполните команду bash 5>&1. К чему она приведет? Что будет, если вы выполните echo netology > /proc/$$/fd/5? Почему так происходит?

bash 5>&1 - Создаст дескриптор 5 и направит его в дескриптор 1 (stdout)
echo netology > /proc/$$/fd/5 - выведет в дескриптор "5", который до этого был направлен в stdout

8.)	Получится ли в качестве входного потока для pipe использовать только stderr команды, не потеряв при этом отображение stdout на pty?

"ls -l /root 9>&2 2>&1 1>&9 | grep denied –c"

9.)	Что выведет команда cat /proc/$$/environ? Как еще можно получить аналогичный по содержанию вывод?

Выведутся переменные Environ - описание окружения, в котором работает процесс. Полезно для просмотра содержимого окружения, если вам надо, например, посмотреть, была ли установлена переменная окружения перед запуском программы.

Можно получить тоже самое, командами printenv и env.

10.)	Используя man, опишите что доступно по адресам /proc/<PID>/cmdline, /proc/<PID>/exe?

/proc/<PID>/cmdline - полный путь до исполняемого файла процесса [PID]  
/proc/<PID>/exe - содержит ссылку до файла запущенного для процесса [PID], 
                        cat выведет содержимое запущенного файла, 
                        запуск этого файла,  запустит еще одну копию самого файла 

11.)	Узнайте, какую наиболее старшую версию набора инструкций SSE поддерживает ваш процессор с помощью /proc/cpuinfo?

SSE 4.2 
grep sse /proc/cpuinfo

12.)	При открытии нового окна терминала и vagrant ssh создается новая сессия и выделяется pty. Это можно подтвердить командой tty, которая упоминалась в лекции 3.2. Однако:
vagrant@netology1:~$ ssh localhost 'tty'
not a tty
Почитайте, почему так происходит, и как изменить поведение.
Вот тут не нашел ответа. Но вот вопрос? Почему через vagrant ssh выделяется pts а в самой Ubuntu выделяется tty ?
13.)	Бывает, что есть необходимость переместить запущенный процесс из одной сессии в другую. Попробуйте сделать это, воспользовавшись reptyr. Например, так можно перенести в screen процесс, который вы запустили по ошибке в обычной SSH-сессии:

"sudo echo 0 > /proc/sys/kernel/yama/ptrace_scope"
"sudo reptyr -T <PID_NUMBER>"


14.)	sudo echo string > /root/new_file не даст выполнить перенаправление под обычным пользователем, так как перенаправлением занимается процесс shell'а, который запущен без sudo под вашим пользователем. Для решения данной проблемы можно использовать конструкцию echo string | sudo tee /root/new_file. Узнайте что делает команда tee и почему в отличие от sudo echo команда с sudo tee будет работать
Tee делает вывод одновременно и в файл, указаный в качестве параметра, и в stdout, 
Команда получает вывод из stdin, перенаправленный через pipe от stdout команды echo
и так как команда запущена от sudo, соотвественно имеет права на запись в файл



